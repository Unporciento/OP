<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrenador Osciloscopio PRO V2.0</title>
    <style>
        :root {
            --bg-color: #121212;
            --panel-color: #1e1e24;
            --screen-bg: #000;
            --grid-color: rgba(0, 255, 0, 0.2);
            --wave-color: #00ff00;
            --text-main: #e0e0e0;
            --accent: #29b6f6;
            --success: #00e676;
            --error: #ff5252;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', Helvetica, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        /* CONTENEDOR PRINCIPAL (LA TABLET) */
        .scope-container {
            background-color: var(--panel-color);
            border-radius: 20px;
            width: 100%;
            max-width: 800px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            border: 1px solid #333;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* ENCABEZADO */
        header {
            background: #263238;
            padding: 15px 25px;
            border-bottom: 2px solid #37474f;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .battery-icon { font-size: 1.2rem; color: #66bb6a; }

        /* PANTALLA OSCILOSCOPIO */
        .screen-frame {
            padding: 20px;
            background: #101010;
        }

        .screen {
            background-color: var(--screen-bg);
            border: 2px solid #444;
            border-radius: 8px;
            height: 200px;
            position: relative;
            overflow: hidden;
            /* CUADR√çCULA REALISTA */
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            background-position: center center;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
        }

        /* L√çNEA DE ONDA */
        .wave-line {
            height: 3px;
            background: var(--wave-color);
            width: 100%;
            position: absolute;
            top: 50%;
            box-shadow: 0 0 8px var(--wave-color);
            animation: pulse 2s infinite ease-in-out;
        }
        
        /* Animaci√≥n suave para que parezca vivo */
        @keyframes pulse {
            0% { opacity: 0.8; box-shadow: 0 0 5px var(--wave-color); }
            50% { opacity: 1; box-shadow: 0 0 15px var(--wave-color); }
            100% { opacity: 0.8; box-shadow: 0 0 5px var(--wave-color); }
        }

        .os-info {
            position: absolute;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: var(--wave-color);
            font-size: 0.8rem;
            text-shadow: 0 0 2px rgba(0,255,0,0.5);
            padding: 5px;
            background: rgba(0,0,0,0.6);
        }

        /* ZONA DE PREGUNTAS */
        .quiz-area {
            padding: 25px;
            background: #1e1e24;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #78909c;
            margin-bottom: 15px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .question {
            font-size: 1.25rem;
            margin-bottom: 25px;
            line-height: 1.5;
            color: #fff;
            border-left: 4px solid var(--accent);
            padding-left: 15px;
        }

        /* OPCIONES */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        @media (min-width: 600px) {
            .options-grid { grid-template-columns: 1fr 1fr; }
        }

        button.opt-btn {
            background: #2c3e50;
            color: #eceff1;
            border: 1px solid #455a64;
            padding: 15px 20px;
            text-align: left;
            cursor: pointer;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        button.opt-btn:hover {
            background: #37474f;
            transform: translateY(-2px);
            border-color: var(--accent);
        }

        /* ESTADOS CORRECTO / INCORRECTO */
        button.correct {
            background: rgba(0, 230, 118, 0.15) !important;
            border-color: var(--success) !important;
            color: var(--success) !important;
            font-weight: bold;
        }

        button.wrong {
            background: rgba(255, 82, 82, 0.15) !important;
            border-color: var(--error) !important;
            color: var(--error) !important;
            opacity: 0.7;
        }

        /* FEEDBACK */
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #252530;
            border: 1px solid #444;
            display: none;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .next-btn {
            width: 100%;
            padding: 15px;
            background: var(--accent);
            color: #000;
            border: none;
            font-weight: 800;
            font-size: 1.1rem;
            margin-top: 20px;
            cursor: pointer;
            border-radius: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: 0.2s;
            display: none;
            box-shadow: 0 4px 15px rgba(41, 182, 246, 0.4);
        }

        .next-btn:hover {
            background: #4fc3f7;
            transform: scale(1.02);
        }

        /* PANTALLA FINAL */
        .result-screen {
            padding: 40px;
            text-align: center;
            display: none;
        }
        
        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 5px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent);
            margin: 0 auto 20px auto;
            box-shadow: 0 0 30px rgba(41, 182, 246, 0.2);
        }

    </style>
</head>
<body>

<div class="scope-container">
    <header>
        <h1><span style="font-size:1.5em">‚àø</span> DIAGNOSTIC TOOL V2.0</h1>
        <div style="display:flex; align-items:center; gap:10px; font-size:0.8rem; color:#aaa;">
            <span>OSCILOSCOPIO</span>
            <span class="battery-icon">üîã 98%</span>
        </div>
    </header>

    <div class="screen-frame">
        <div class="screen">
            <div class="wave-line"></div>
            <div class="os-info" style="top:5px; left:5px;">CH1: 2.00V</div>
            <div class="os-info" style="top:5px; right:5px;">Trig: 2.4V</div>
            <div class="os-info" style="bottom:5px; right:5px;">Time: 500us</div>
            <div class="os-info" style="bottom:5px; left:5px;">DC Coupling</div>
        </div>
    </div>

    <div class="quiz-area" id="quiz-box">
        <div class="stats-bar">
            <span id="q-progress">Pregunta 1 / 20</span>
            <span id="current-score">Puntaje: 0</span>
        </div>

        <div class="question" id="question-text">
            Cargando base de datos...
        </div>

        <div class="options-grid" id="options-box">
            </div>

        <div class="feedback" id="feedback-msg"></div>

        <button class="next-btn" onclick="nextQuestion()">Siguiente An√°lisis ‚ûî</button>
    </div>

    <div class="result-screen" id="result-box">
        <div class="score-circle" id="final-score">0%</div>
        <h2 style="color:#fff; margin-bottom:10px;">Diagn√≥stico Completado</h2>
        <p id="final-msg" style="color:#aaa; margin-bottom:30px;">...</p>
        <button class="next-btn" style="display:block" onclick="location.reload()">üîÑ REINICIAR SISTEMA</button>
    </div>
</div>

<script>
    // BASE DE DATOS DE PREGUNTAS (Tus mismas preguntas, l√≥gica intacta)
    const questions = [
        // --- ZONA VERTICAL ---
        { q: "La se√±al se sale de la pantalla por arriba y por abajo. ¬øQu√© ajuste debes hacer?", opts: ["Aumentar Volts/Div (Zoom Vertical)", "Ajustar Sec/Div", "Mover Posici√≥n Horizontal", "Mover Trigger"], a: 0, exp: "Necesitas aumentar la escala de voltaje (hacer 'zoom out' vertical) para que la onda quepa en la pantalla." },
        { q: "Tienes dos se√±ales (CH1 y CH2) superpuestas. ¬øQu√© control las separa?", opts: ["Position (Vertical)", "Trigger Level", "Sec/Div", "Probe Attenuation"], a: 0, exp: "La perilla 'Vertical Position' mueve la se√±al arriba o abajo sin cambiar su voltaje, solo para organizarlas." },
        { q: "¬øPara qu√© sirve el acoplamiento 'AC'?", opts: ["Bloquea la corriente continua, deja ver solo el rizado/ruido", "Mide bater√≠a directa", "Apaga el canal", "Muestra la se√±al pura"], a: 0, exp: "El modo AC pone un filtro que elimina el voltaje base. Es vital para ver el 'rizado' de un alternador malo." },
        { q: "Mides 12V pero la pantalla dice 1.2V. ¬øQu√© pasa?", opts: ["Sonda en x10 y Osciloscopio en x1", "Trigger alto", "Base de tiempo lenta", "Falta masa"], a: 0, exp: "Si la sonda aten√∫a (x10), debes configurar el canal en el men√∫ para que multiplique x10 y muestre el valor real." },
        // --- ZONA HORIZONTAL ---
        { q: "Solo ves l√≠neas verticales r√°pidas y borrosas. ¬øQu√© ajustas?", opts: ["Sec/Div (Base de tiempo)", "Volts/Div", "Trigger", "Brillo"], a: 0, exp: "La se√±al es muy lenta para tu zoom actual. Ajusta Sec/Div para ver la forma de onda." },
        { q: "Si la base de tiempo es '500 us' (microsegundos), la se√±al es:", opts: ["Muy r√°pida (CAN Bus, Inyectores)", "Muy lenta (Temp. Motor)", "Est√°tica", "DC pura"], a: 0, exp: "Microsegundos es para electr√≥nica de alta velocidad." },
        // --- TRIGGER ---
        { q: "La onda 'baila' de izquierda a derecha. No se queda quieta.", opts: ["Ajustar Trigger Level", "Ajustar Posici√≥n Vertical", "Cambiar Volts/Div", "Nada, es normal"], a: 0, exp: "Falta sincronizaci√≥n. Mueve el nivel de disparo (Trigger) hasta que cruce la onda." },
        { q: "¬øQu√© hace el modo 'SINGLE'?", opts: ["Captura una vez y congela la pantalla", "Disparo continuo", "Apaga el equipo", "Solo canal 1"], a: 0, exp: "Ideal para fallas que ocurren una sola vez y desaparecen (fallas intermitentes)." },
        { q: "Trigger Level en 12V, pero la se√±al solo llega a 5V. (Modo Normal)", opts: ["Pantalla negra / Congelada", "Se ve bien", "Se quema", "Se ve distorsionada"], a: 0, exp: "En modo Normal, si la se√±al no toca el nivel de disparo, el osciloscopio NO dibuja nada." },
        { q: "Quieres disparar cuando la se√±al EMPIEZA a subir.", opts: ["Slope: Rising (Ascendente)", "Slope: Falling (Descendente)", "Coupling: GND", "Invert: ON"], a: 0, exp: "Slope Rising (Flanco de subida) dispara en la pendiente positiva." },
        // --- SONDA ---
        { q: "Vas a medir picos de 400V en una bobina. ¬øSonda?", opts: ["x10 (Atenuada)", "x1 (Directa)", "Sin sonda", "Cable pelado"], a: 0, exp: "x10 protege el equipo reduciendo el voltaje de entrada 10 veces." },
        { q: "¬øD√≥nde conectas el caim√°n NEGRO de la sonda?", opts: ["Siempre a MASA (Chasis/Bat-)", "A positivo", "A la se√±al", "A nada"], a: 0, exp: "El negro es referencia (0V). Si toca positivo, haces un cortocircuito grave." },
        // --- LECTURA ---
        { q: "Volts/Div = 2V. La se√±al mide 3 cuadros de alto. ¬øVoltaje?", opts: ["6 Voltios", "2 Voltios", "3 Voltios", "5 Voltios"], a: 0, exp: "3 cuadros x 2V = 6V." },
        { q: "Sec/Div = 1ms. Un ciclo mide 4 cuadros de ancho. ¬øPeriodo?", opts: ["4 ms", "1 ms", "0.25 ms", "40 ms"], a: 0, exp: "4 cuadros x 1ms = 4ms." },
        { q: "La se√±al tiene mucho 'ruido' (l√≠nea gruesa/sucia).", opts: ["Usar modo Average (Promedio)", "Peak Detect", "Single", "Roll Mode"], a: 0, exp: "El modo Promedio limpia el ruido aleatorio de la se√±al." },
        // --- GENERAL ---
        { q: "La parte met√°lica exterior del conector BNC es:", opts: ["Masa (Tierra)", "Se√±al", "220V", "Pl√°stico"], a: 0, exp: "Todo el chasis del conector BNC es masa. Cuidado con tocar positivos con √©l." },
        { q: "¬øBot√≥n para configurar todo autom√°tico?", opts: ["Auto Set / Auto Scale", "Menu", "Run/Stop", "Measure"], a: 0, exp: "Auto Set busca la se√±al y la acomoda sola. √ötil para empezar r√°pido." },
        { q: "¬øBot√≥n para ver n√∫meros (Voltaje, Frecuencia) en pantalla?", opts: ["Measure (Medidas)", "Acquire", "Utility", "Save"], a: 0, exp: "Measure despliega el men√∫ de valores num√©ricos." },
        { q: "Modo 'Roll' (la se√±al camina de derecha a izq) sirve para:", opts: ["Se√±ales lentas (O2, Temp)", "Inyectores", "Red CAN", "Congelar"], a: 0, exp: "Para ver cambios lentos en tiempo real, como un sensor de ox√≠geno oscilando." },
        { q: "¬øQu√© hace la funci√≥n 'Invert'?", opts: ["Voltea la se√±al (Positivo se ve abajo)", "Apaga el canal", "Cambia color", "Filtra ruido"], a: 0, exp: "Invierte la polaridad visualmente en la pantalla." }
    ];

    let currentQ = 0;
    let score = 0;
    let shuffledQuestions = [];

    function start() {
        shuffledQuestions = questions.sort(() => 0.5 - Math.random());
        currentQ = 0;
        score = 0;
        document.getElementById('result-box').style.display = 'none';
        document.getElementById('quiz-box').style.display = 'block';
        loadQuestion();
    }

    function loadQuestion() {
        const qData = shuffledQuestions[currentQ];
        document.getElementById('q-progress').innerText = `AN√ÅLISIS ${currentQ + 1} / ${shuffledQuestions.length}`;
        document.getElementById('question-text').innerText = qData.q;
        
        const optsDiv = document.getElementById('options-box');
        optsDiv.innerHTML = '';
        
        // Mezclar opciones
        const answers = qData.opts.map((opt, i) => ({ txt: opt, idx: i }));
        const shuffledAnswers = answers.sort(() => 0.5 - Math.random());

        shuffledAnswers.forEach(ans => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerHTML = `<span style="color:#29b6f6; font-weight:bold; margin-right:10px;">${String.fromCharCode(65+ans.idx)}:</span> ${ans.txt}`; // A, B, C, D
            btn.onclick = () => check(btn, ans.idx === qData.a, qData.exp);
            optsDiv.appendChild(btn);
        });

        document.getElementById('feedback-msg').style.display = 'none';
        document.querySelector('.next-btn').style.display = 'none';
    }

    function check(btn, isCorrect, exp) {
        const btns = document.querySelectorAll('.opt-btn');
        btns.forEach(b => b.disabled = true); // Bloquear botones
        
        const fb = document.getElementById('feedback-msg');
        fb.style.display = 'block';
        
        if (isCorrect) {
            btn.classList.add('correct');
            fb.innerHTML = `<div style="color:#00e676; font-weight:bold; margin-bottom:5px;">‚úÖ DIAGN√ìSTICO CORRECTO</div>${exp}`;
            fb.style.borderColor = "#00e676";
            score++;
        } else {
            btn.classList.add('wrong');
            fb.innerHTML = `<div style="color:#ff5252; font-weight:bold; margin-bottom:5px;">‚ùå ERROR DE LECTURA</div>${exp}`;
            fb.style.borderColor = "#ff5252";
        }
        
        document.getElementById('current-score').innerText = `Puntaje: ${score}`;
        document.querySelector('.next-btn').style.display = 'block';
    }

    function nextQuestion() {
        currentQ++;
        if (currentQ < shuffledQuestions.length) {
            loadQuestion();
        } else {
            endGame();
        }
    }

    function endGame() {
        document.getElementById('quiz-box').style.display = 'none';
        document.getElementById('result-box').style.display = 'block';
        
        const percentage = Math.round((score / shuffledQuestions.length) * 100);
        document.getElementById('final-score').innerText = `${percentage}%`;
        
        let msg = "";
        let color = "#aaa";
        
        if (percentage === 100) { msg = "üèÜ NIVEL EXPERTO: Certificaci√≥n Lista."; color = "#00e676"; }
        else if (percentage >= 80) { msg = "‚úÖ NIVEL T√âCNICO: Aprobado S√≥lido."; color = "#29b6f6"; }
        else if (percentage >= 60) { msg = "‚ö†Ô∏è NIVEL APRENDIZ: Necesitas repasar Trigger y Voltajes."; color = "#ffeb3b"; }
        else { msg = "‚õî PELIGRO: No toques el osciloscopio real todav√≠a."; color = "#ff5252"; }
        
        document.getElementById('final-msg').innerText = msg;
        document.getElementById('final-msg').style.color = color;
    }

    // Iniciar
    start();
</script>

</body>
</html>
