<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Don Pistón | HeavyDiag Pro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-body: #050505;
            --bg-card: #111111;
            --bg-hover: #1a1a1a;
            --text-main: #ffffff;
            --text-muted: #9ca3af;
            --accent: #f59e0b; /* Naranja Mecánico */
            --accent-glow: rgba(245, 158, 11, 0.3);
            --border: #262626;
            --success: #10b981;
            --danger: #ef4444;
            --radius: 12px;
            --font-main: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: var(--font-main);
            background-color: var(--bg-body);
            color: var(--text-main);
            overflow-x: hidden;
        }

        /* --- NAV --- */
        nav {
            position: fixed;
            top: 0; width: 100%; z-index: 100;
            background: rgba(5, 5, 5, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
        }
        .nav-content {
            max-width: 1400px; margin: 0 auto; padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { font-weight: 900; font-size: 1.4rem; letter-spacing: -0.5px; display: flex; align-items: center; gap: 10px; }
        .logo i { color: var(--accent); }
        
        /* --- HERO --- */
        .hero {
            padding: 160px 20px 80px;
            text-align: center;
            background: radial-gradient(circle at 50% 0%, #1f1f1f 0%, #050505 70%);
        }
        .hero h1 {
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 800;
            line-height: 1;
            letter-spacing: -2px;
            margin-bottom: 20px;
            background: linear-gradient(to bottom right, #fff, #666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero p { color: var(--text-muted); font-size: 1.2rem; max-width: 600px; margin: 0 auto 40px; }

        /* --- BUSCADOR INTELIGENTE --- */
        .search-wrapper {
            max-width: 700px; margin: 0 auto; position: relative;
        }
        .search-input {
            width: 100%;
            padding: 20px 25px;
            padding-right: 60px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 100px;
            color: white;
            font-size: 1.1rem;
            font-family: var(--font-main);
            transition: all 0.3s ease;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px var(--accent-glow);
        }
        .search-icon {
            position: absolute; right: 25px; top: 50%; transform: translateY(-50%);
            color: var(--text-muted); font-size: 1.2rem;
        }

        /* --- FILTROS --- */
        .filters {
            display: flex; justify-content: center; gap: 10px; margin-top: 30px; flex-wrap: wrap;
        }
        .filter-btn {
            background: var(--bg-card); border: 1px solid var(--border);
            color: var(--text-muted); padding: 8px 16px; border-radius: 20px;
            cursor: pointer; transition: 0.3s; font-weight: 600; font-size: 0.9rem;
        }
        .filter-btn:hover, .filter-btn.active {
            background: #fff; color: #000; border-color: #fff;
        }

        /* --- GRID DE TARJETAS --- */
        .grid-container {
            max-width: 1400px; margin: 0 auto; padding: 60px 20px;
        }
        .grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px;
        }
        
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            display: flex; flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-5px);
            border-color: var(--text-muted);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px; }
        .icon-box {
            width: 50px; height: 50px; background: #1a1a1a; border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; color: var(--text-main);
        }
        .card-model { font-family: var(--font-mono); font-size: 0.8rem; color: var(--accent); text-transform: uppercase; margin-bottom: 5px; }
        .card-title { font-size: 1.25rem; font-weight: 700; line-height: 1.3; margin-bottom: 10px; }
        .card-desc { font-size: 0.95rem; color: var(--text-muted); line-height: 1.5; flex-grow: 1; }
        .card-tags { margin-top: 20px; display: flex; gap: 8px; flex-wrap: wrap; }
        .tag { font-size: 0.75rem; padding: 4px 8px; background: #222; border-radius: 6px; color: #888; }

        /* --- MODAL --- */
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);
            z-index: 1000; display: none; opacity: 0; transition: opacity 0.3s;
        }
        .modal-backdrop.open { display: flex; opacity: 1; justify-content: center; align-items: center; }
        
        .modal {
            background: #0f0f0f; width: 95%; max-width: 800px; height: 85vh;
            border-radius: 20px; border: 1px solid var(--border);
            display: flex; flex-direction: column;
            box-shadow: 0 50px 100px rgba(0,0,0,0.8);
            transform: scale(0.95); transition: transform 0.3s;
        }
        .modal-backdrop.open .modal { transform: scale(1); }

        .modal-header { padding: 25px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: #141414; }
        .modal-close { background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }
        
        .modal-content { padding: 30px; overflow-y: auto; }

        /* --- DON PISTON CARD --- */
        .don-piston-box {
            background: linear-gradient(135deg, #1a1a1a, #0a0a0a);
            border-left: 4px solid var(--accent);
            padding: 20px; margin-bottom: 30px;
            border-radius: 0 12px 12px 0;
            position: relative;
        }
        .dp-label { font-family: var(--font-mono); color: var(--accent); font-size: 0.8rem; margin-bottom: 5px; display: block; }
        .dp-text { font-size: 1.1rem; font-style: italic; color: #ddd; }
        .dp-icon { position: absolute; top: 15px; right: 15px; font-size: 2rem; opacity: 0.2; color: var(--accent); }

        /* --- ACORDEON --- */
        .accordion { margin-bottom: 10px; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
        .acc-header {
            width: 100%; padding: 15px 20px; background: var(--bg-card); border: none;
            text-align: left; color: #fff; font-weight: 600; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
        }
        .acc-header:hover { background: var(--bg-hover); }
        .acc-body {
            max-height: 0; overflow: hidden; transition: max-height 0.3s ease;
            background: #0a0a0a; padding: 0 20px; color: var(--text-muted);
        }
        .acc-body.open { padding: 20px; max-height: 1000px; border-top: 1px solid var(--border); }
        .acc-body ul { padding-left: 20px; }
        .acc-body li { margin-bottom: 8px; }

        /* --- ESTADOS VACÍOS --- */
        .no-results {
            text-align: center; width: 100%; grid-column: 1 / -1;
            padding: 50px; color: var(--text-muted);
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .filters { display: none; } /* Ocultar filtros en móvil para simplificar */
            .modal { height: 100%; width: 100%; border-radius: 0; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="nav-content">
            <div class="logo"><i class="fas fa-wrench"></i> Don Pistón</div>
            <div style="color: var(--text-muted); font-size: 0.9rem;">Edición Taller Real</div>
        </div>
    </nav>

    <section class="hero">
        <h1>Diagnóstico Inteligente</h1>
        <p>Escribe lo que ves o escuchas. Don Pistón te dirá qué le duele a la máquina.</p>
        
        <div class="search-wrapper">
            <input type="text" id="searchInput" class="search-input" placeholder="Ej: 'agua en el motor', 'humo negro hilux', 'P0087'..." autofocus>
            <i class="fas fa-search search-icon"></i>
        </div>

        <div class="filters" id="filters">
            <button class="filter-btn active" data-cat="all">Todo</button>
            <button class="filter-btn" data-cat="motor">Motor</button>
            <button class="filter-btn" data-cat="hyd">Hidráulica</button>
            <button class="filter-btn" data-cat="elec">Eléctrico</button>
            <button class="filter-btn" data-cat="trans">Transmisión</button>
        </div>
    </section>

    <div class="grid-container">
        <div id="resultsGrid" class="grid">
            </div>
    </div>

    <div id="detailModal" class="modal-backdrop">
        <div class="modal">
            <div class="modal-header">
                <div>
                    <h2 id="mTitle" style="font-size: 1.5rem;">Título</h2>
                    <span id="mModel" style="color: var(--accent); font-family: var(--font-mono); font-size: 0.9rem;">MODELO</span>
                </div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-content" id="mBody">
                </div>
        </div>
    </div>

<script>
    // --------------------------------------------------------------
    // 1. BASE DE DATOS MAESTRA (Fusionada de tus archivos)
    // --------------------------------------------------------------
    const DB = [
        // --- CASOS CAMIONETAS (Don_Piston_Edicion_Taller_Real.txt) ---
        {
            id: 'hilux-inj',
            cat: 'motor',
            model: 'Toyota Hilux 2.4/2.8',
            title: 'Humo negro al acelerar / Pérdida de potencia',
            desc: 'Exceso de humo negro al exigir el motor, posible cascabeleo.',
            tags: ['inyección', 'humo negro', 'potencia', 'filtro'],
            dp: "Mire compadre, si la Hilux echa humo negro como chimenea, le falta aire o le sobra petróleo. Fíjate primero el filtro de aire, capaz está tapao en tierra. Si no, son los inyectores goteando.",
            tech: {
                symptoms: ["Pérdida potencia progresiva", "Humo negro denso", "Consumo elevado"],
                causes: ["Filtro de aire saturado", "Inyectores con fuga", "EGR trabada abierta"],
                steps: ["Revisar indicador de restricción filtro aire.", "Prueba de retorno de inyectores.", "Escanear valores de corrección de inyección."],
                solution: "Cambio de filtro, limpieza de admisión y calibración de inyectores."
            }
        },
        {
            id: 'ranger-egr',
            cat: 'motor',
            model: 'Ford Ranger 3.2',
            title: 'Consumo de Agua / Agua en el Motor',
            desc: 'Baja el nivel de refrigerante sin fugas visibles. Posible humo blanco.',
            tags: ['refrigerante', 'agua', 'egr', 'temperatura'],
            dp: "Ojo piojo con la Ranger 3.2. Si te baja el agua y no ves charco, se la está tomando el motor por el enfriador de la EGR. ¡Cuidado que doblás biela!",
            tech: {
                symptoms: ["Consumo de refrigerante", "Humo blanco dulce", "Presión en sistema de refrigeración en frío"],
                causes: ["Enfriador de EGR fisurado internamente", "Junta de culata"],
                steps: ["Prueba de presión al sistema.", "By-pass temporal de EGR para descartar.", "Revisar aceite por emulsión."],
                solution: "Reemplazo del enfriador EGR y válvula. Cambio de aceite inmediato."
            }
        },
        {
            id: 'amarok-dpf',
            cat: 'motor',
            model: 'VW Amarok',
            title: 'Luz DPF / Modo Emergencia',
            desc: 'Testigo de filtro de partículas, el motor no supera 2000 RPM.',
            tags: ['dpf', 'escape', 'limp mode'],
            dp: "Esa Amarok está 'atorada'. Si la usas solo pa' ir al súper, el DPF se tapa. Necesita carretera, compadre. Dale una vuelta en 3ra a 3000 vueltas pa' que queme.",
            tech: {
                symptoms: ["Testigo DPF encendido", "Pérdida de potencia", "Regeneraciones fallidas"],
                causes: ["Trayectos cortos", "Sensor presión diferencial dañado", "Hollín excesivo"],
                steps: ["Lectura de masa de hollín con scanner.", "Regeneración forzada estática.", "Verificar sensor G450."],
                solution: "Regeneración forzada o limpieza química del DPF."
            }
        },
        {
            id: 'l200-4wd',
            cat: 'trans',
            model: 'Mitsubishi L200',
            title: 'Luz 4WD parpadea / No conecta',
            desc: 'La tracción no engancha o la luz verde del tablero queda parpadeando.',
            tags: ['4x4', 'transfer', 'vacío', 'super select'],
            dp: "Clásico de la L200. Los sensores de la transfer o las mangueritas de vacío se cortan con el barro. Tírate abajo y revisa las mangueras negras chicas.",
            tech: {
                symptoms: ["Luz 4WD parpadea", "No conecta eje delantero"],
                causes: ["Fuga de vacío en mangueras", "Solenoides de vacío quemados", "Actuador eje delantero trabado"],
                steps: ["Verificar vacío en actuador delantero.", "Probar resistencia solenoides (aprox 38-45 ohm).", "Revisar switches de transfer."],
                solution: "Reemplazo de mangueras de vacío o solenoides."
            }
        },

        // --- CASOS MAQUINARIA PESADA (a.txt y HeavyDiag) ---
        {
            id: 'cat-hyd',
            cat: 'hyd',
            model: 'Caterpillar 320D/E',
            title: 'Hidráulico Lento / Ruido Bomba',
            desc: 'La máquina se siente lenta y la bomba hace ruido de martilleo (cavitación).',
            tags: ['hidráulica', 'bomba', 'lento', 'ruido'],
            dp: "Si la bomba chilla como chancho, está tragando aire. Revisá el nivel de hidráulico y las abrazaderas de la succión. Si el aceite parece leche, ya le entró aire.",
            tech: {
                symptoms: ["Movimientos lentos", "Ruido de cavitación", "Aceite espumoso"],
                causes: ["Entrada de aire en succión", "Filtro tapado", "Nivel bajo"],
                steps: ["Revisar visor de nivel.", "Apretar abrazaderas lado succión.", "Medir presiones pilotaje (40 bar)."],
                solution: "Corregir nivel, sellar entrada de aire y purgar sistema."
            }
        },
        {
            id: 'komatsu-error',
            cat: 'elec',
            model: 'Komatsu PC200-8',
            title: 'Código E02 / Sistema PC-EPC',
            desc: 'Falla en el control de la bomba. La máquina trabaja en modo emergencia.',
            tags: ['código', 'e02', 'solenoide', 'electrónico'],
            dp: "El E02 es la válvula PC-EPC. Es la que le dice a la bomba cuánto aceite tirar. Si falla, la máquina queda 'tonta'. Revisá el enchufe de la bomba.",
            tech: {
                symptoms: ["Código E02 o E03", "Hidráulico lento o calado motor"],
                causes: ["Solenoide PC-EPC circuito abierto/corto", "Cableado cortado"],
                steps: ["Medir resistencia solenoide (7-14 ohm).", "Verificar continuidad cables a controlador."],
                solution: "Cambio de solenoide PC-EPC o reparación de arnés."
            }
        },
        {
            id: 'cat-trans',
            cat: 'trans',
            model: 'Caterpillar 966H (Cargador)',
            title: 'Transmisión patina / Alta temperatura',
            desc: 'El cargador no empuja bien y sube la temperatura del convertidor.',
            tags: ['transmisión', 'convertidor', 'patina', 'temperatura'],
            dp: "Si el aceite de la caja huele a quemado, los discos ya fueron. Pero antes, revisá que no sea el convertidor que no está calando. Hacé la prueba de calado (Stall Test).",
            tech: {
                symptoms: ["Baja fuerza de tracción", "Aceite oscuro/olor quemado", "Alta temperatura torque"],
                causes: ["Discos de embrague gastados", "Fuga interna en pistón de embrague", "Convertidor ineficiente"],
                steps: ["Realizar Stall Test.", "Medir presiones de embrague (aprox 350 psi).", "Cortar filtro transmisión y buscar partículas."],
                solution: "Overhaul de transmisión o cambio de convertidor."
            }
        },
        {
            id: 'volvo-adblue',
            cat: 'motor',
            model: 'Volvo A40G / Camiones',
            title: 'Falla SCR / AdBlue / Limitación Potencia',
            desc: 'Mensaje de error sistema post-tratamiento, cuenta regresiva para paró.',
            tags: ['adblue', 'scr', 'def', 'potencia'],
            dp: "El famoso AdBlue. Si te sale la cuenta atrás, rellená el tanque con urea buena. Si sigue, es el inyector de urea que se cristalizó. Sacalo y lavalo con agua caliente.",
            tech: {
                symptoms: ["Luz SCR", "Torque limitado", "Consumo anormal de urea"],
                causes: ["Urea cristalizada en inyector", "Sensor NOx sucio", "Bomba urea fallando"],
                steps: ["Verificar calidad urea (refractómetro).", "Prueba de dosificación.", "Inspección visual inyector."],
                solution: "Limpieza inyector con agua caliente, reemplazo filtros AdBlue."
            }
        },
        {
            id: 'belaz-steer',
            cat: 'hyd',
            model: 'Belaz 7530',
            title: 'Dirección dura / Sobrecalentamiento',
            desc: 'Dificultad para girar, sistema hidráulico de dirección hirviendo.',
            tags: ['dirección', 'bomba', 'cilindro'],
            dp: "En estos bichos grandes, si la dirección se pone dura, revisá los acumuladores de nitrógeno. Si están vacíos, la bomba trabaja el doble y calienta el aceite.",
            tech: {
                symptoms: ["Dirección pesada", "Alta temperatura tanque dirección"],
                causes: ["Acumuladores sin carga de N2", "Bomba dirección desgastada", "Válvula prioridad trabada"],
                steps: ["Verificar precarga acumuladores.", "Medir caudal bomba dirección.", "Revisar válvula alivio."],
                solution: "Recarga de nitrógeno o cambio de sellos de acumulador."
            }
        }
    ];

    // --------------------------------------------------------------
    // 2. MOTOR DE BÚSQUEDA INTELIGENTE (FUZZY LOGIC)
    // --------------------------------------------------------------
    const grid = document.getElementById('resultsGrid');
    const searchInput = document.getElementById('searchInput');
    const filterBtns = document.querySelectorAll('.filter-btn');
    let currentFilter = 'all';

    function render(data) {
        grid.innerHTML = '';
        if (data.length === 0) {
            grid.innerHTML = `
                <div class="no-results">
                    <i class="fas fa-search" style="font-size:3rem; margin-bottom:20px; opacity:0.5;"></i>
                    <h3>No encontramos esa falla exacta</h3>
                    <p>Intenta con palabras clave como "humo", "freno", "ruido" o el modelo.</p>
                </div>`;
            return;
        }

        data.forEach(item => {
            // Icono basado en categoría
            let icon = 'fa-cogs';
            if(item.cat === 'motor') icon = 'fa-car-battery';
            if(item.cat === 'hyd') icon = 'fa-water';
            if(item.cat === 'elec') icon = 'fa-bolt';
            
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-header">
                    <div class="icon-box"><i class="fas ${icon}"></i></div>
                    <div class="card-model">${item.model}</div>
                </div>
                <div class="card-title">${item.title}</div>
                <div class="card-desc">${item.desc}</div>
                <div class="card-tags">
                    ${item.tags.map(t => `<span class="tag">#${t}</span>`).join('')}
                </div>
            `;
            card.onclick = () => openModal(item);
            grid.appendChild(card);
        });
    }

    // Algoritmo de Búsqueda Mejorado
    function filterData() {
        const query = searchInput.value.toLowerCase();
        // Romper query en palabras (ej: "agua motor" -> ["agua", "motor"])
        const terms = query.split(' ').filter(t => t.length > 0);

        const filtered = DB.filter(item => {
            // 1. Filtro por categoría
            if (currentFilter !== 'all' && item.cat !== currentFilter) return false;

            // 2. Búsqueda "Smart"
            if (terms.length === 0) return true;

            // Crear un gran string con todo el contenido buscable del item
            const searchableText = `
                ${item.title} 
                ${item.model} 
                ${item.desc} 
                ${item.tags.join(' ')} 
                ${item.dp} 
                ${item.tech.symptoms.join(' ')} 
                ${item.tech.causes.join(' ')}
            `.toLowerCase();

            // Verificar que TODAS las palabras buscadas existan en algún lugar del item
            // Esto permite encontrar "agua motor" aunque el texto sea "agua en el bloque del motor"
            return terms.every(term => searchableText.includes(term));
        });

        render(filtered);
    }

    // Event Listeners
    searchInput.addEventListener('input', filterData);

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            // Update UI
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            // Update Logic
            currentFilter = btn.dataset.cat;
            filterData();
        });
    });

    // --------------------------------------------------------------
    // 3. MODAL & UI LOGIC
    // --------------------------------------------------------------
    const modalBackdrop = document.getElementById('detailModal');
    const mTitle = document.getElementById('mTitle');
    const mModel = document.getElementById('mModel');
    const mBody = document.getElementById('mBody');

    function openModal(item) {
        mTitle.innerText = item.title;
        mModel.innerText = item.model;
        
        let html = '';

        // Tarjeta Don Pistón
        if (item.dp) {
            html += `
                <div class="don-piston-box">
                    <i class="fas fa-user-cog dp-icon"></i>
                    <span class="dp-label">CONSEJO DE DON PISTÓN</span>
                    <p class="dp-text">"${item.dp}"</p>
                </div>
            `;
        }

        // Acordeones Técnicos
        html += buildAccordion('Síntomas Detectados', item.tech.symptoms);
        html += buildAccordion('Causas Probables', item.tech.causes);
        html += buildAccordion('Pasos de Diagnóstico', item.tech.steps, true); // Numerado

        // Solución
        html += `
            <div style="margin-top: 25px; padding: 20px; border: 1px solid var(--success); border-radius: 8px; background: rgba(16, 185, 129, 0.1);">
                <h4 style="color: var(--success); margin-bottom: 5px; display:flex; align-items:center; gap:10px;">
                    <i class="fas fa-check-circle"></i> Solución Recomendada
                </h4>
                <p style="color: #ddd; line-height: 1.6;">${item.tech.solution}</p>
            </div>
        `;

        mBody.innerHTML = html;
        modalBackdrop.classList.add('open');
        
        // Reiniciar acordeones
        setupAccordions();
    }

    function closeModal() {
        modalBackdrop.classList.remove('open');
    }

    // Cerrar con Escape
    document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape') closeModal();
    });

    // Cerrar click afuera
    modalBackdrop.addEventListener('click', (e) => {
        if(e.target === modalBackdrop) closeModal();
    });

    function buildAccordion(title, items, ordered = false) {
        const listType = ordered ? 'ol' : 'ul';
        const listContent = items.map(i => `<li>${i}</li>`).join('');
        
        return `
            <div class="accordion">
                <button class="acc-header">
                    ${title} <i class="fas fa-chevron-down"></i>
                </button>
                <div class="acc-body">
                    <${listType}>
                        ${listContent}
                    </${listType}>
                </div>
            </div>
        `;
    }

    function setupAccordions() {
        const headers = document.querySelectorAll('.acc-header');
        headers.forEach(h => {
            h.addEventListener('click', () => {
                const body = h.nextElementSibling;
                const icon = h.querySelector('i');
                
                // Toggle
                if (body.classList.contains('open')) {
                    body.classList.remove('open');
                    icon.style.transform = 'rotate(0deg)';
                } else {
                    // Close others (optional, I prefer keeping multiple open)
                    body.classList.add('open');
                    icon.style.transform = 'rotate(180deg)';
                }
            });
        });
    }

    // Init
    render(DB);

</script>
</body>
</html>
